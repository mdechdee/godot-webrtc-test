[gd_scene load_steps=12 format=3 uid="uid://dq6fxq2ulrj2x"]

[ext_resource type="Script" path="res://scenes/player.gd" id="1_hdy1j"]
[ext_resource type="PackedScene" uid="uid://cbw8ijfwmu3kk" path="res://assets/person.blend" id="1_xu7nx"]
[ext_resource type="Script" path="res://scenes/player_debug.gd" id="3_uas1o"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_b54m1"]
animation = &"Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_6f8yw"]
animation = &"Run"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_yjwmx"]
auto_advance = true

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_nyim4"]
xfade_time = 0.1
advance_expression = "direction.length() > 0.1"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_t5btj"]
xfade_time = 0.1
advance_expression = "direction.length() <= 0.1 && velocity.length() <= 0.0001"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_818no"]
states/End/position = Vector2(662, 100)
states/Idle/node = SubResource("AnimationNodeAnimation_b54m1")
states/Idle/position = Vector2(350, 100)
states/Run/node = SubResource("AnimationNodeAnimation_6f8yw")
states/Run/position = Vector2(489, 100)
transitions = ["Start", "Idle", SubResource("AnimationNodeStateMachineTransition_yjwmx"), "Idle", "Run", SubResource("AnimationNodeStateMachineTransition_nyim4"), "Run", "Idle", SubResource("AnimationNodeStateMachineTransition_t5btj")]
graph_offset = Vector2(-19, -22)

[sub_resource type="AnimationNodeStateMachinePlayback" id="AnimationNodeStateMachinePlayback_be0t7"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_d0yny"]
height = 1.8
radius = 0.305

[node name="Player" type="CharacterBody3D"]
floor_constant_speed = true
script = ExtResource("1_hdy1j")

[node name="Person" parent="." instance=ExtResource("1_xu7nx")]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0488555, 0, -0.00168848)

[node name="Skeleton3D" parent="Person/Armature" index="0"]
bones/0/position = Vector3(-0.0155937, 3.59904, -0.0268753)
bones/0/rotation = Quaternion(-0.0136264, 0.000494315, -6.7363e-06, 0.999907)
bones/1/rotation = Quaternion(0.97821, 0.0750654, -0.1712, -0.0903355)
bones/2/rotation = Quaternion(-0.130876, 0.00087561, 0.0781209, 0.988316)
bones/3/rotation = Quaternion(0.681374, 0.30003, 0.0100094, 0.667541)
bones/4/rotation = Quaternion(0.0278839, -0.00276119, 0.0077802, 0.999577)
bones/7/rotation = Quaternion(0.0521391, -0.0207183, 0.00106833, 0.998424)
bones/8/position = Vector3(1.02234, 1.20518, 0.218902)
bones/8/rotation = Quaternion(0.645331, 0.100214, -0.739741, 0.162135)
bones/9/rotation = Quaternion(0.0639975, 0.0476115, 0.040059, 0.996008)
bones/10/rotation = Quaternion(-0.00104894, 0.0134801, -0.172749, 0.984873)
bones/11/position = Vector3(-1.01989, 0.990103, 0.223648)
bones/11/rotation = Quaternion(0.645165, -0.0660305, 0.740589, 0.175867)
bones/12/rotation = Quaternion(0.0469196, -0.0980689, 0.196014, 0.974556)
bones/13/rotation = Quaternion(0.00353454, 0.0136112, -0.00813352, 0.999868)
bones/14/rotation = Quaternion(0.987005, -0.0850472, 0.106507, -0.0851199)
bones/15/rotation = Quaternion(-0.122414, -0.000876911, -0.0730701, 0.989785)
bones/16/rotation = Quaternion(0.676378, -0.250079, -0.0616718, 0.69005)
bones/17/position = Vector3(0.794086, 0.337338, 0.091983)
bones/17/rotation = Quaternion(0.0259001, 0.716299, 0.697222, 0.0112481)
bones/18/position = Vector3(0.277877, 2.01416, -0.944891)
bones/19/position = Vector3(-0.874545, 0.337338, 0.091983)
bones/19/rotation = Quaternion(-0.0321259, 0.716371, 0.696963, -0.00485043)
bones/20/position = Vector3(-0.417624, 2.03734, -1.2417)

[node name="AnimationTree" type="AnimationTree" parent="."]
unique_name_in_owner = true
tree_root = SubResource("AnimationNodeStateMachine_818no")
anim_player = NodePath("../Person/AnimationPlayer")
advance_expression_base_node = NodePath("..")
active = true
parameters/playback = SubResource("AnimationNodeStateMachinePlayback_be0t7")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Padding" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 20.0
offset_top = 20.0
offset_right = -20.0
offset_bottom = -20.0
grow_horizontal = 2
grow_vertical = 2

[node name="SpeedLabel" type="Label" parent="CanvasLayer/Padding"]
unique_name_in_owner = true
offset_right = 70.0
offset_bottom = 26.0
text = "Velocity: "

[node name="PlayerDebug" type="Control" parent="CanvasLayer/Padding" node_paths=PackedStringArray("player")]
layout_mode = 3
anchor_left = 0.0395683
anchor_top = 0.125
anchor_right = 0.0395683
anchor_bottom = 0.125
grow_vertical = 2
size_flags_horizontal = 4
size_flags_vertical = 4
script = ExtResource("3_uas1o")
player = NodePath("../../..")
metadata/_edit_use_anchors_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.9, 0)
shape = SubResource("CylinderShape3D_d0yny")

[node name="SpringArm" type="SpringArm3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(0.998789, 0, 0.0491984, -0.00431786, 0.996141, 0.087658, -0.0490086, -0.0877643, 0.994935, 0, 1.71221, 0)
spring_length = 3.0

[node name="Camera3D" type="Camera3D" parent="SpringArm"]

[editable path="Person"]
